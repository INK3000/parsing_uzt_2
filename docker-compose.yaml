version: "3.9"
services:
  api:
    build:
      context: ./api
    volumes:
      - static_volume:/static
    command: sh -c "python manage.py migrate && python manage.py collectstatic --noinput && gunicorn parsing_uzt_2.asgi:application -k uvicorn.workers.UvicornWorker"
  nginx:
    build:
      context: ./nginx
    volumes:
      - static_volume:/static
    ports:
      - "80:80"
volumes:
  static_volume:
